document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("region"),a=document.getElementById("province"),c=document.getElementById("city"),s=document.getElementById("barangay");function i(t,e=null){const n=e||"Choose "+g(t.name);t.innerHTML=`<option value="" disabled selected hidden>${n}</option>`}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}i(l,"Choose Region"),i(a,"Choose Province"),i(c,"Choose City"),i(s,"Choose Barangay");function p(t,e,n="name"){fetch(t).then(o=>o.json()).then(o=>{i(e),o.forEach(r=>{e.innerHTML+=`<option value="${r[n]}">${r[n]}</option>`})})}p("https://psgc.gitlab.io/api/regions/",l),l.addEventListener("change",function(){const t=this.value;i(a),i(c),i(s),fetch("https://psgc.gitlab.io/api/regions/").then(e=>e.json()).then(e=>{const n=e.find(r=>r.name===t);if(!n)return;const o=n.code;o==="130000000"?(a.innerHTML='<option value="Metro Manila (NCR)" selected>Metro Manila (NCR)</option>',p(`https://psgc.gitlab.io/api/regions/${o}/cities-municipalities/`,c)):p(`https://psgc.gitlab.io/api/regions/${o}/provinces/`,a)})}),a.addEventListener("change",function(){const t=this.value;i(c),i(s),t!=="Metro Manila (NCR)"&&fetch("https://psgc.gitlab.io/api/provinces/").then(e=>e.json()).then(e=>{const n=e.find(o=>o.name===t);n&&p(`https://psgc.gitlab.io/api/provinces/${n.code}/cities-municipalities/`,c)})}),c.addEventListener("change",function(){const t=this.value;i(s),fetch("https://psgc.gitlab.io/api/cities-municipalities/").then(e=>e.json()).then(e=>{const n=e.find(o=>o.name===t);n&&p(`https://psgc.gitlab.io/api/cities-municipalities/${n.code}/barangays/`,s)})})});
