document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("region"),o=document.getElementById("province"),n=document.getElementById("city"),c=document.getElementById("barangay");function t(e,a=null){e.innerHTML=`<option value="">${a||"Choose "+g(e.name)}</option>`}function g(e){return e.charAt(0).toUpperCase()+e.slice(1)}function i(e,a,r="name",d="code"){fetch(e).then(s=>s.json()).then(s=>{t(a),s.forEach(p=>{a.innerHTML+=`<option value="${p[d]}" data-name="${p[r]}">${p[r]}</option>`})})}i("https://psgc.gitlab.io/api/regions/",l),l.addEventListener("change",function(){const e=this.value;t(o),t(n),t(c),e==="130000000"?(o.innerHTML='<option value="130000000" selected>Metro Manila (NCR)</option>',i(`https://psgc.gitlab.io/api/regions/${e}/cities-municipalities/`,n)):i(`https://psgc.gitlab.io/api/regions/${e}/provinces/`,o)}),o.addEventListener("change",function(){const e=this.value;t(n),t(c),e!=="130000000"&&i(`https://psgc.gitlab.io/api/provinces/${e}/cities-municipalities/`,n)}),n.addEventListener("change",function(){const e=this.value;t(c),i(`https://psgc.gitlab.io/api/cities-municipalities/${e}/barangays/`,c)})});
