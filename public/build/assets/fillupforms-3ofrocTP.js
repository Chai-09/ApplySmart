document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("educational_level"),i=document.getElementById("incoming_grlvl"),l=document.getElementById("birthday-container"),e=document.getElementById("applicant_bday"),c=document.getElementById("lrn-container"),r=document.getElementById("lrn_no"),a=document.getElementById("strand-container"),t=document.getElementById("strand"),n={"Grade School":["Kinder","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],"Junior High School":["Grade 7","Grade 8","Grade 9","Grade 10"],"Senior High School":["Grade 11","Grade 12"]};function s(o){i.innerHTML='<option value="">Select Grade Level</option>',n[o]&&n[o].forEach(u=>{const p=document.createElement("option");p.value=u,p.textContent=u,i.appendChild(p)})}d.addEventListener("change",function(){const o=this.value;s(o),l.style.display="none",e.required=!1,e.disabled=!0,e.value="",c.style.display="none",r.required=!1,r.disabled=!0,r.value="",a.style.display="none",t.required=!1,t.disabled=!0,t.value="",(o==="Grade School"||o==="Junior High School")&&(c.style.display="block",r.disabled=!1,r.required=!0),o==="Senior High School"&&(a.style.display="block",t.disabled=!1,t.required=!0)}),i.addEventListener("change",function(){const o=this.value;d.value==="Grade School"&&(o==="Kinder"||o==="Grade 1")?(l.style.display="block",e.disabled=!1,e.required=!0):(l.style.display="none",e.disabled=!0,e.required=!1,e.value="")})});document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("current_school_city"),i=document.getElementById("citySuggestions");if(!d||!i)return;let l=[];fetch("https://psgc.gitlab.io/api/provinces/").then(e=>e.json()).then(e=>{l=e}).catch(e=>console.error("Failed to load provinces:",e)),d.addEventListener("input",async function(){const e=d.value.trim().toLowerCase();if(i.innerHTML="",!(e.length<2))try{const r=await(await fetch("https://psgc.gitlab.io/api/cities-municipalities/")).json(),a=[];for(const t of r)if(t.name.toLowerCase().includes(e)){let n="Unknown Province";if(!t.provinceCode)n="Metro Manila";else{const s=l.find(o=>o.code===t.provinceCode);s&&(n=s.name)}a.push(`${t.name}, ${n}`)}a.length===0?i.innerHTML='<li class="list-group-item disabled">No results found</li>':a.forEach(t=>{const n=document.createElement("li");n.classList.add("list-group-item"),n.textContent=t,n.style.cursor="pointer",n.onclick=()=>{d.value=t,i.innerHTML=""},i.appendChild(n)})}catch(c){console.error("City fetch error:",c)}}),document.addEventListener("click",e=>{!i.contains(e.target)&&e.target!==d&&(i.innerHTML="")})});
