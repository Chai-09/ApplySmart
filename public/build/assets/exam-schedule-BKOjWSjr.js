import{f as b}from"./material_green-EDn5hsRC.js";document.addEventListener("DOMContentLoaded",function(){const c=(window.availableExamDates||[]).map(t=>t.trim());b("#datePicker",{dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",minDate:"today",enable:c,disableMobile:!0,onChange:function(t,a,n){const e=new Event("change");n.input.dispatchEvent(e)}});const r=document.getElementById("datePicker"),l=document.getElementById("saveExamScheduleRoute").value,d=document.querySelector('meta[name="csrf-token"]').content,u=document.querySelectorAll(".schedule-group"),m=document.getElementById("schedule-container");r.addEventListener("change",function(){const t=this.value,a=new Date().toISOString().split("T")[0];if(t<a){Swal.fire({icon:"warning",title:"Unavailable Date",text:"You cannot select a date that has already passed.",confirmButtonColor:"#007f3e"}),this.value="";return}let n=!1;u.forEach(e=>{e.getAttribute("data-date")===t?(e.classList.remove("hidden"),n=!0):e.classList.add("hidden")}),n||Swal.fire({icon:"info",title:"No available schedules",text:"There are no exam times available for the selected date.",confirmButtonColor:"#007f3e"})}),m.addEventListener("click",function(t){if(t.target.classList.contains("time-slot")){const a=t.target.innerText,n=t.target.closest(".schedule-group"),e=n.querySelector(".date-header").innerText;Swal.fire({title:"Confirm Your Selection",html:`<b>Date:</b> ${e}<br><b>Time:</b> ${a}`,icon:"question",showCancelButton:!0,confirmButtonText:"Yes!",cancelButtonText:"Cancel",cancelButtonColor:"red",customClass:{confirmButton:"btn-yes",cancelButton:"btn-cancel"}}).then(i=>{if(i.isConfirmed){const[f,h]=a.split(" to "),p=n.getAttribute("data-date");fetch(l,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":d},body:JSON.stringify({exam_date:p,start_time:s(f),end_time:s(h)})}).then(o=>o.json()).then(o=>{o.success?window.location.href="/step-5":Swal.fire({icon:"error",title:"Error",text:o.message})})}})}});function s(t){const[a,n]=t.trim().split(" ");let[e,i]=a.split(":");return e=parseInt(e),n==="PM"&&e!==12&&(e+=12),n==="AM"&&e===12&&(e=0),`${String(e).padStart(2,"0")}:${i}:00`}});
