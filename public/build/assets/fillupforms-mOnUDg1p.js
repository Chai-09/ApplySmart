import{f}from"./material_green-EDn5hsRC.js";document.addEventListener("DOMContentLoaded",function(){const e=document.querySelector('input[name="educational_level"]'),t=document.querySelector('input[name="incoming_grlvl"]'),r=document.getElementById("strand-container"),n=document.getElementById("birthday-container"),o=document.getElementById("lrn-container"),s=document.getElementById("source-container"),l=document.getElementById("grade-level-container");function a(){const d=document.getElementById("applicant_bday");d&&f(d,{dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",maxDate:"today",allowInput:!0,disableMobile:!0});const c=((e==null?void 0:e.value)||"").trim(),m=((t==null?void 0:t.value)||"").trim();l.style.display="none",s.style.display="none",r.style.display="none",n.style.display="none",o.style.display="none",c&&(l.style.display="block",s.style.display="block",c==="Grade School"?(o.style.display="block",(m==="KINDER"||m==="GRADE 1")&&(n.style.display="block")):c==="Junior High School"?o.style.display="block":c==="Senior High School"&&(o.style.display="block",r.style.display="block"))}a(),educationalLevelSelect.addEventListener("change",function(){const d=((educationalLevelSelect==null?void 0:educationalLevelSelect.value)||(e==null?void 0:e.value)||"").trim();populateGrades(d),a()}),incomingGradeLevelSelect.addEventListener("change",function(){a()});const i=((educationalLevelSelect==null?void 0:educationalLevelSelect.value)||(e==null?void 0:e.value)||"").trim();(incomingGradeLevelSelect==null?void 0:incomingGradeLevelSelect.tagName)==="SELECT"&&populateGrades(i),a()});function u(e){const t=document.getElementById("alert-container"),r=document.getElementById("alert-wrapper"),n=document.querySelector(".alert-box");n&&n.remove();const o=document.createElement("div");o.classList.add("alert-box"),o.innerHTML=`
        <div class="alert-content">
            <div class="alert-message">
                <span><i class="fa-solid fa-circle-exclamation"></i> ${e}</span>
            </div>
            <span class="alert-close" onclick="this.parentElement.parentElement.remove()">&times;</span>
        </div>
    `,r.style.display="block",t.style.display="block",t.appendChild(o)}window.nextStep=function(e){if(e>1){const r=document.querySelectorAll(`#step${e-1} [required]`);let n=!0;if(r.forEach(o=>{const s=o.value.trim(),l=o.getAttribute("type");if(!s){n=!1,o.classList.add("border-danger"),u("Please complete all required fields.");return}if(l==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s)){n=!1,o.classList.add("border-danger"),u("Please enter a valid email address (e.g., name@example.com).");return}if(l==="tel"&&!/^09\d{9}$/.test(s)){n=!1,o.classList.add("border-danger"),u("Please enter a valid phone number starting with 09 followed by 9 digits.");return}if(l==="number"&&(isNaN(s)||s<0)){n=!1,o.classList.add("border-danger"),u("Please enter a valid numeric value.");return}o.classList.remove("border-danger")}),!n)return}document.querySelectorAll("#step1, #step2, #step3").forEach(r=>{r.style.display="none"}),document.getElementById("step"+e).style.display="block";const t=document.querySelector(".alert-box");t&&t.remove(),document.querySelectorAll("input, select").forEach(r=>{r.classList.remove("border-danger")})};document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("current_school_city"),t=document.getElementById("citySuggestions");if(!e||!t)return;let r=[];fetch("https://psgc.gitlab.io/api/provinces/").then(n=>n.json()).then(n=>{r=n}).catch(n=>console.error("Failed to load provinces:",n)),e.addEventListener("input",async function(){const n=e.value.trim().toLowerCase();if(t.innerHTML="",!(n.length<2))try{const s=await(await fetch("https://psgc.gitlab.io/api/cities-municipalities/")).json(),l=[];for(const a of s)if(a.name.toLowerCase().includes(n)){let i="Unknown Province";if(!a.provinceCode)i="Metro Manila";else{const d=r.find(c=>c.code===a.provinceCode);d&&(i=d.name)}l.push(`${a.name}, ${i}`)}l.length===0?t.innerHTML='<li class="list-group-item disabled">No results found</li>':l.forEach(a=>{const i=document.createElement("li");i.classList.add("list-group-item"),i.textContent=a,i.style.cursor="pointer",i.onclick=()=>{e.value=a,t.innerHTML=""},t.appendChild(i)})}catch(o){console.error("City fetch error:",o)}}),document.addEventListener("click",n=>{!t.contains(n.target)&&n.target!==e&&(t.innerHTML="")})});document.addEventListener("DOMContentLoaded",function(){if(window.strandRecommendation&&Swal.fire({icon:"info",title:"Strand Suggested",html:"Your recommended strand is <b>"+window.strandRecommendation+"</b>. You can still choose another strand if you want.",showCancelButton:!0,confirmButtonText:"View Strand Breakdown",cancelButtonText:"Close",confirmButtonColor:"#28a745"}).then(e=>{e.isConfirmed&&new bootstrap.Modal(document.getElementById("scoreBreakdownModal")).show()}),window.showStrandModal&&window.strandRecommenderRoute&&Swal.fire({title:"Need help choosing your strand?",text:"If you are undecided on your strand, why not try a set of questions to see our recommendations?",icon:"question",showCancelButton:!0,confirmButtonText:"Yes, answer now",cancelButtonText:"No, maybe later",confirmButtonColor:"#28a745"}).then(e=>{e.isConfirmed&&(window.location.href=window.strandRecommenderRoute)}),window.strandBreakdown&&document.getElementById("strandChart")){const e=document.getElementById("strandChart").getContext("2d");new Chart(e,{type:"pie",data:{labels:Object.keys(window.strandBreakdown).map(t=>t.toUpperCase()),datasets:[{data:Object.values(window.strandBreakdown),backgroundColor:["#007bff","#28a745","#ffc107","#dc3545","#6f42c1"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(t){return t.label+": "+t.formattedValue+"%"}}}}}})}});document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("step1Forms"),t=document.getElementById("formSubmission");t&&t.addEventListener("click",function(r){r.preventDefault(),e.checkValidity()?Swal.fire({title:"Are you sure?",text:"Please review all information before submitting.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#00753F",cancelButtonColor:"#d33",confirmButtonText:"Confirm"}).then(n=>{n.isConfirmed&&(t.disabled=!0,t.textContent="Submitting...",e.submit())}):e.reportValidity()})});
