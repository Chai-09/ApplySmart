import{f as p}from"./material_green-EDn5hsRC.js";document.addEventListener("DOMContentLoaded",function(){const t=document.querySelector('input[name="educational_level"]'),o=document.querySelector('input[name="incoming_grlvl"]'),l=document.getElementById("strand-container"),e=document.getElementById("birthday-container"),n=document.getElementById("lrn-container"),i=document.getElementById("source-container"),s=document.getElementById("grade-level-container");function r(){const c=document.getElementById("applicant_bday");c&&p(c,{dateFormat:"Y-m-d",altInput:!0,altFormat:"F j, Y",maxDate:"today",allowInput:!0,disableMobile:!0});const d=((t==null?void 0:t.value)||"").trim(),m=((o==null?void 0:o.value)||"").trim();s.style.display="none",i.style.display="none",l.style.display="none",e.style.display="none",n.style.display="none",d&&(s.style.display="block",i.style.display="block",d==="Grade School"?(n.style.display="block",(m==="KINDER"||m==="GRADE 1")&&(e.style.display="block")):d==="Junior High School"?n.style.display="block":d==="Senior High School"&&(n.style.display="block",l.style.display="block"))}r(),educationalLevelSelect.addEventListener("change",function(){const c=((educationalLevelSelect==null?void 0:educationalLevelSelect.value)||(t==null?void 0:t.value)||"").trim();populateGrades(c),r()}),incomingGradeLevelSelect.addEventListener("change",function(){r()});const a=((educationalLevelSelect==null?void 0:educationalLevelSelect.value)||(t==null?void 0:t.value)||"").trim();(incomingGradeLevelSelect==null?void 0:incomingGradeLevelSelect.tagName)==="SELECT"&&populateGrades(a),r()});function u(t){const o=document.getElementById("alert-container"),l=document.getElementById("alert-wrapper"),e=document.querySelector(".alert-box");e&&e.remove();const n=document.createElement("div");n.classList.add("alert-box"),n.innerHTML=`
        <div class="alert-content">
            <div class="alert-message">
                <span><i class="fa-solid fa-circle-exclamation"></i> ${t}</span>
            </div>
            <span class="alert-close" onclick="this.parentElement.parentElement.remove()">&times;</span>
        </div>
    `,l.style.display="block",o.style.display="block",o.appendChild(n)}window.nextStep=function(t){if(t>1){const l=document.querySelectorAll(`#step${t-1} [required]`);let e=!0;if(l.forEach(n=>{const i=n.value.trim(),s=n.getAttribute("type");if(!i){e=!1,n.classList.add("border-danger"),u("Please complete all required fields.");return}if(s==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i)){e=!1,n.classList.add("border-danger"),u("Please enter a valid email address (e.g., name@example.com).");return}if(s==="tel"&&!/^09\d{9}$/.test(i)){e=!1,n.classList.add("border-danger"),u("Please enter a valid phone number starting with 09 followed by 9 digits.");return}if(s==="number"&&(isNaN(i)||i<0)){e=!1,n.classList.add("border-danger"),u("Please enter a valid numeric value.");return}n.classList.remove("border-danger")}),!e)return}document.querySelectorAll("#step1, #step2, #step3").forEach(l=>{l.style.display="none"}),document.getElementById("step"+t).style.display="block";const o=document.querySelector(".alert-box");o&&o.remove(),document.querySelectorAll("input, select").forEach(l=>{l.classList.remove("border-danger")})};document.addEventListener("DOMContentLoaded",function(){const t=document.getElementById("current_school_city"),o=document.getElementById("citySuggestions");if(!t||!o)return;let l=[];fetch("https://psgc.gitlab.io/api/provinces/").then(e=>e.json()).then(e=>{l=e}).catch(e=>console.error("Failed to load provinces:",e)),t.addEventListener("input",async function(){const e=t.value.trim().toLowerCase();if(o.innerHTML="",!(e.length<2))try{const i=await(await fetch("https://psgc.gitlab.io/api/cities-municipalities/")).json(),s=[];for(const r of i)if(r.name.toLowerCase().includes(e)){let a="Unknown Province";if(!r.provinceCode)a="Metro Manila";else{const c=l.find(d=>d.code===r.provinceCode);c&&(a=c.name)}s.push(`${r.name}, ${a}`)}s.length===0?o.innerHTML='<li class="list-group-item disabled">No results found</li>':s.forEach(r=>{const a=document.createElement("li");a.classList.add("list-group-item"),a.textContent=r,a.style.cursor="pointer",a.onclick=()=>{t.value=r,o.innerHTML=""},o.appendChild(a)})}catch(n){console.error("City fetch error:",n)}}),document.addEventListener("click",e=>{!o.contains(e.target)&&e.target!==t&&(o.innerHTML="")})});
