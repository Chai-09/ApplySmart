document.addEventListener("DOMContentLoaded",function(){const l=document.getElementById("region"),s=document.getElementById("province"),c=document.getElementById("city"),p=document.getElementById("barangay");function o(t,e=null){t.innerHTML=`<option value="">${e||"Choose "+g(t.name)}</option>`}function g(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t,e,n="name"){fetch(t).then(i=>i.json()).then(i=>{o(e),i.forEach(r=>{e.innerHTML+=`<option value="${r[n]}">${r[n]}</option>`})})}a("https://psgc.gitlab.io/api/regions/",l),l.addEventListener("change",function(){const t=this.value;o(s),o(c),o(p),fetch("https://psgc.gitlab.io/api/regions/").then(e=>e.json()).then(e=>{const n=e.find(r=>r.name===t);if(!n)return;const i=n.code;i==="130000000"?(s.innerHTML='<option value="Metro Manila (NCR)" selected>Metro Manila (NCR)</option>',a(`https://psgc.gitlab.io/api/regions/${i}/cities-municipalities/`,c)):a(`https://psgc.gitlab.io/api/regions/${i}/provinces/`,s)})}),s.addEventListener("change",function(){const t=this.value;o(c),o(p),t!=="Metro Manila (NCR)"&&fetch("https://psgc.gitlab.io/api/provinces/").then(e=>e.json()).then(e=>{const n=e.find(i=>i.name===t);n&&a(`https://psgc.gitlab.io/api/provinces/${n.code}/cities-municipalities/`,c)})}),c.addEventListener("change",function(){const t=this.value;o(p),fetch("https://psgc.gitlab.io/api/cities-municipalities/").then(e=>e.json()).then(e=>{const n=e.find(i=>i.name===t);n&&a(`https://psgc.gitlab.io/api/cities-municipalities/${n.code}/barangays/`,p)})})});
