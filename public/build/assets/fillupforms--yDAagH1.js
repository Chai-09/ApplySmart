document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("educational_level"),t=document.getElementById("incoming_grlvl"),r=document.getElementById("birthday-container"),e=document.getElementById("applicant_bday"),s=document.getElementById("lrn-container"),l=document.getElementById("lrn_no"),a=document.getElementById("strand-container"),n=document.getElementById("strand"),o={"Grade School":["Kinder","Grade 1","Grade 2","Grade 3","Grade 4","Grade 5","Grade 6"],"Junior High School":["Grade 7","Grade 8","Grade 9","Grade 10"],"Senior High School":["Grade 11","Grade 12"]};function c(i){t.innerHTML='<option value="">Select Grade Level</option>',o[i]&&o[i].forEach(u=>{const p=document.createElement("option");p.value=u,p.textContent=u,t.appendChild(p)})}d.addEventListener("change",function(){const i=this.value;c(i),r.style.display="none",e.required=!1,e.disabled=!0,e.value="",s.style.display="none",l.required=!1,l.disabled=!0,l.value="",a.style.display="none",n.required=!1,n.disabled=!0,n.value="",(i==="Grade School"||i==="Junior High School")&&(s.style.display="block",l.disabled=!1,l.required=!0),i==="Senior High School"&&(s.style.display="block",l.disabled=!1,l.required=!0,a.style.display="block",n.disabled=!1,n.required=!0)}),t.addEventListener("change",function(){const i=this.value;d.value==="Grade School"&&(i==="Kinder"||i==="Grade 1")?(r.style.display="block",e.disabled=!1,e.required=!0):(r.style.display="none",e.disabled=!0,e.required=!1,e.value="")})});window.nextStep=function(d){document.querySelectorAll("#step1, #step2, #step3").forEach(t=>{t.style.display="none"}),document.getElementById("step"+d).style.display="block"};document.addEventListener("DOMContentLoaded",function(){const d=document.getElementById("current_school_city"),t=document.getElementById("citySuggestions");if(!d||!t)return;let r=[];fetch("https://psgc.gitlab.io/api/provinces/").then(e=>e.json()).then(e=>{r=e}).catch(e=>console.error("Failed to load provinces:",e)),d.addEventListener("input",async function(){const e=d.value.trim().toLowerCase();if(t.innerHTML="",!(e.length<2))try{const l=await(await fetch("https://psgc.gitlab.io/api/cities-municipalities/")).json(),a=[];for(const n of l)if(n.name.toLowerCase().includes(e)){let o="Unknown Province";if(!n.provinceCode)o="Metro Manila";else{const c=r.find(i=>i.code===n.provinceCode);c&&(o=c.name)}a.push(`${n.name}, ${o}`)}a.length===0?t.innerHTML='<li class="list-group-item disabled">No results found</li>':a.forEach(n=>{const o=document.createElement("li");o.classList.add("list-group-item"),o.textContent=n,o.style.cursor="pointer",o.onclick=()=>{d.value=n,t.innerHTML=""},t.appendChild(o)})}catch(s){console.error("City fetch error:",s)}}),document.addEventListener("click",e=>{!t.contains(e.target)&&e.target!==d&&(t.innerHTML="")})});
